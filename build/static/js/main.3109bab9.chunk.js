(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(26),c=a.n(l),s=(a(49),a(3)),i=a(4),o=a(6),u=a(5),p=a(7),m=a(120),h=a(119),d=a(12),b=a(13),E=a(11),f=a(118),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={details:[]},a.detailView=a.detailView.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"detailView",value:function(e){this.props.detailView(e)}},{key:"render",value:function(){var e=this;return n.a.createElement("li",null,n.a.createElement(b.Col,{m:12,s:12},n.a.createElement(f.a,{to:"/detail"},n.a.createElement("div",{className:"cardResult",onClick:function(){return e.detailView(e.props)}},n.a.createElement(b.Card,{horizontal:!0,header:n.a.createElement(b.CardTitle,{image:this.props.artwork})},n.a.createElement("p",null,"Artist : ",this.props.artistName,n.a.createElement("br",null),"Track : ",this.props.trackName||this.props.album,n.a.createElement("br",null)))))))}}]),t}(r.Component),j=Object(E.b)(null,{detailView:function(e){return{type:"DETAIL_VIEW",payload:e}}})(v),w=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("ul",{className:"theShelf"},this.props.searchResults.map(function(e){return n.a.createElement(j,{key:e.previewUrl,artistName:e.artistName,trackName:e.trackName,album:e.collectionName,artwork:e.artworkUrl100,releaseDate:e.releaseDate,trackLength:e.trackTimeMillis,genre:e.primaryGenreName,previewUrlType:e.previewUrl.substr(e.previewUrl.length-3),previewUrl:e.previewUrl,previewUrlVideo:e.previewUrl.replace("m4v","mp4"),appleMusicUrl:e.collectionViewUrl,trackPrice:e.trackPrice,albumPrice:e.collectionPrice,type:e.wrapperType,primaryGenreName:e.primaryGenreName})}))}}]),t}(r.Component),y=Object(E.b)(function(e){return{searchResults:e.results.results}},{})(w),O=a(29),g=a.n(O),k=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.selected.releaseDate,t=this.props.selected.trackLength;return n.a.createElement("div",{className:"detailWrapper"},n.a.createElement(b.Col,{m:6,s:6},n.a.createElement(b.Card,{horizontal:!0},n.a.createElement("p",null,n.a.createElement("img",{src:this.props.selected.artwork,alt:"",height:"100",width:"100"}),n.a.createElement("br",null),"Artist : ",this.props.selected.artistName,n.a.createElement("br",null),"Track : ",this.props.selected.trackName||this.props.selected.album,n.a.createElement("br",null),"Album : ",this.props.selected.album,n.a.createElement("br",null),n.a.createElement("br",null),"Length: ",n.a.createElement(g.a,{format:"mm:ss"},t),n.a.createElement("br",null),"Release Date : ",n.a.createElement(g.a,{format:"D/M/YYYY"},e),n.a.createElement("br",null),"Genre: ",this.props.selected.genre||this.props.selected.primaryGenreName,n.a.createElement("br",null),n.a.createElement("br",null),"Track Price: $",this.props.selected.trackPrice,n.a.createElement("br",null),"Album Price: $",this.props.selected.albumPrice,n.a.createElement("br",null),n.a.createElement("a",{href:this.props.selected.appleMusicUrl},"View in Apple Music")," ",n.a.createElement("br",null),n.a.createElement("br",null),"m4a"===this.props.selected.previewUrlType?n.a.createElement("audio",{ref:"audio_tag",src:this.props.selected.previewUrl,controls:!0}):n.a.createElement("video",{width:"480",height:"351",controls:!0},n.a.createElement("source",{src:this.props.selected.previewUrlVideo,type:"video/mp4"})),";"),n.a.createElement(b.Chip,{className:"topResult backBtn",onClick:function(){return window.history.go(-1)}},"Back"))))}}]),t}(r.Component),C=Object(E.b)(function(e){return{selected:e.details.details}},{})(k),T=function(e){return function(t){console.log(e),fetch("/search/"+e).then(function(e){return e.json()}).then(function(e){return t({type:"SEARCH_TERM",payload:e})})}},N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).onKeyPress=function(e){"Enter"===e.key&&a.props.searchTerm(a.state.searchQuery)},a.state={searchQuery:""},a.updateInput=a.updateInput.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.onKeyPress=a.onKeyPress.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"updateInput",value:function(e){this.setState({searchQuery:e.target.value})}},{key:"handleSubmit",value:function(){this.props.searchTerm(this.state.searchQuery)}},{key:"render",value:function(){return n.a.createElement("div",{className:"input-field"},n.a.createElement("input",{id:"searchbar",placeholder:"Search for Artist or Track...",onChange:this.updateInput,onKeyPress:this.onKeyPress}),n.a.createElement("input",{type:"submit",onClick:this.handleSubmit,style:{display:"none"}}))}}]),t}(r.Component),S=Object(E.b)(function(e){return{results:e.results.items}},{searchTerm:T})(N),U=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("li",{className:"collection-item topResult",onClick:function(){return e.props.onSearch(e.props.artistName)}},this.props.artistName,n.a.createElement("br",null))}}]),t}(r.Component),P=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchTopTen()}},{key:"render",value:function(){var e=this,t=this.props.topten;return this.props.detailView?this.props.detailView?null:void 0:n.a.createElement("div",{className:"topTenList"},n.a.createElement("ul",{className:"collection with-header"},n.a.createElement("li",{className:"collection-header"},n.a.createElement("h4",null,"Top 10 Searches")),t.map(function(t){return n.a.createElement(U,{key:t._id,artistName:t._id,onSearch:e.props.searchTerm})})))}}]),t}(r.Component),R=Object(E.b)(function(e){return{topten:e.list.items}},{fetchTopTen:function(){return function(e){fetch("/getTopTen").then(function(e){return e.json()}).then(function(t){return e({type:"FETCH_TOPTEN",payload:t})})}},searchTerm:T})(P),V=a(21),I=a.n(V),A=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).onChange=function(t){var a=e.state;a[t.target.name]=t.target.value,e.setState(a)},e.onSubmit=function(t){t.preventDefault();var a=e.state,r=a.username,n=a.password;I.a.post("/register",{username:r,password:n}).then(function(t){localStorage.setItem("jwtToken",t.data.token),e.props.history.push("/home")})},e.state={username:"",password:""},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("h2",null,"Register"),n.a.createElement("input",{type:"text",placeholder:"Username",name:"username",value:t,onChange:this.onChange,required:!0}),n.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:a,onChange:this.onChange,required:!0}),n.a.createElement("button",{type:"submit"},"Register")))}}]),t}(r.Component),_=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).onChange=function(t){var a=e.state;a[t.target.name]=t.target.value,e.setState(a)},e.onSubmit=function(t){t.preventDefault();var a=e.state,r=a.username,n=a.password;I.a.post("/login",{username:r,password:n}).then(function(t){localStorage.setItem("jwtToken",t.data.token),e.setState({message:""}),e.props.history.push("/home")}).catch(function(t){401===t.response.status&&e.setState({message:"Login failed. Username or password not match"})})},e.state={username:"",password:"",message:""},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,r=e.message;return n.a.createElement("div",null,n.a.createElement("form",{onSubmit:this.onSubmit},""!==r&&n.a.createElement("div",null,r),n.a.createElement("h2",null,"Please sign in"),n.a.createElement("input",{type:"text",placeholder:"Username",name:"username",value:t,onChange:this.onChange,required:!0}),n.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:a,onChange:this.onChange,required:!0}),n.a.createElement("button",{type:"submit"},"Login"),n.a.createElement("p",null,"Not a member? ",n.a.createElement(f.a,{to:"/register"},"Register here"))))}}]),t}(r.Component),D=(a(114),function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).logout=function(){localStorage.removeItem("jwtToken"),window.location.href="/"},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(m.a,null,n.a.createElement("div",null,n.a.createElement(h.a,{exact:!0,path:"/",component:_}),n.a.createElement(h.a,{path:"/register",component:A}),n.a.createElement(h.a,{path:"/home",render:function(t){return n.a.createElement(b.Row,null,n.a.createElement(b.Col,{s:6},n.a.createElement("button",{onClick:e.logout},"Log Out"),n.a.createElement(S,null),n.a.createElement(y,null)),n.a.createElement(b.Col,{s:6},n.a.createElement(R,null)))}}),n.a.createElement(h.a,{path:"/detail",component:C})))}}]),t}(r.Component)),L=a(19),M=a(43),G=a(16),W={items:[]},K={results:[]},q={details:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DETAIL_VIEW":return Object(G.a)({},e,{details:t.payload});default:return e}},B={creds:[]},H=Object(L.c)({list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TOPTEN":return Object(G.a)({},e,{items:t.payload});default:return e}},results:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_TERM":return Object(G.a)({},e,{results:t.payload});default:return e}},details:x,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Object(G.a)({},e,{creds:t.payload});default:return e}}}),Q=[M.a],Y=Object(L.d)(H,{},L.a.apply(void 0,Q));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(E.a,{store:Y},n.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,t,a){e.exports=a(117)},49:function(e,t,a){}},[[44,2,1]]]);
//# sourceMappingURL=main.3109bab9.chunk.js.map